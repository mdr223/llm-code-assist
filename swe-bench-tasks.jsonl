{"repo": "sqlfluff/sqlfluff", "instance_id": "sqlfluff__sqlfluff-1625", "base_commit": "14e1a23a3166b9a645a16de96f694c77a5d4abb7", "patch": "diff --git a/src/sqlfluff/rules/L031.py b/src/sqlfluff/rules/L031.py\n--- a/src/sqlfluff/rules/L031.py\n+++ b/src/sqlfluff/rules/L031.py\n@@ -211,7 +211,7 @@ def _lint_aliases_in_join(\n             violation_buff.append(\n                 LintResult(\n                     anchor=alias_info.alias_identifier_ref,\n-                    description=\"Avoid using aliases in join condition\",\n+                    description=\"Avoid aliases in from clauses and join conditions.\",\n                     fixes=fixes,\n                 )\n             )\n", "test_patch": "diff --git a/test/cli/commands_test.py b/test/cli/commands_test.py\n--- a/test/cli/commands_test.py\n+++ b/test/cli/commands_test.py\n@@ -49,7 +49,7 @@ def invoke_assert_code(\n expected_output = \"\"\"== [test/fixtures/linter/indentation_error_simple.sql] FAIL\n L:   2 | P:   4 | L003 | Indentation not hanging or a multiple of 4 spaces\n L:   5 | P:  10 | L010 | Keywords must be consistently upper case.\n-L:   5 | P:  13 | L031 | Avoid using aliases in join condition\n+L:   5 | P:  13 | L031 | Avoid aliases in from clauses and join conditions.\n \"\"\"\n \n \n", "problem_statement": "TSQL - L031 incorrectly triggers \"Avoid using aliases in join condition\" when no join present\n## Expected Behaviour\r\n\r\nBoth of these queries should pass, the only difference is the addition of a table alias 'a':\r\n\r\n1/ no alias\r\n\r\n```\r\nSELECT [hello]\r\nFROM\r\n    mytable\r\n```\r\n\r\n2/ same query with alias\r\n\r\n```\r\nSELECT a.[hello]\r\nFROM\r\n    mytable AS a\r\n```\r\n\r\n## Observed Behaviour\r\n\r\n1/ passes\r\n2/ fails with: L031: Avoid using aliases in join condition.\r\n\r\nBut there is no join condition :-)\r\n\r\n## Steps to Reproduce\r\n\r\nLint queries above\r\n\r\n## Dialect\r\n\r\nTSQL\r\n\r\n## Version\r\n\r\nsqlfluff 0.6.9\r\nPython 3.6.9\r\n\r\n## Configuration\r\n\r\nN/A\n", "hints_text": "Actually, re-reading the docs I think this is the intended behaviour... closing", "created_at": "2021-10-13T11:35:29Z", "version": "0.6", "FAIL_TO_PASS": "[\"test/cli/commands_test.py::test__cli__command_directed\"]", "PASS_TO_PASS": "[\"test/cli/commands_test.py::test__cli__command_dialect\", \"test/cli/commands_test.py::test__cli__command_dialect_legacy\", \"test/cli/commands_test.py::test__cli__command_lint_stdin[command0]\", \"test/cli/commands_test.py::test__cli__command_lint_stdin[command1]\", \"test/cli/commands_test.py::test__cli__command_lint_stdin[command2]\", \"test/cli/commands_test.py::test__cli__command_lint_stdin[command3]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command0]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command1]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command2]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command3]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command4]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command5]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command6]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command7]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command8]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command9]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command10]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command11]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command12]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command13]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command14]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command15]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command16]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command17]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command18]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command19]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command20]\", \"test/cli/commands_test.py::test__cli__command_lint_parse[command21]\", \"test/cli/commands_test.py::test__cli__command_lint_parse_with_retcode[command0-1]\", \"test/cli/commands_test.py::test__cli__command_lint_parse_with_retcode[command1-1]\", \"test/cli/commands_test.py::test__cli__command_lint_parse_with_retcode[command2-1]\", \"test/cli/commands_test.py::test__cli__command_lint_warning_explicit_file_ignored\", \"test/cli/commands_test.py::test__cli__command_lint_skip_ignore_files\", \"test/cli/commands_test.py::test__cli__command_versioning\", \"test/cli/commands_test.py::test__cli__command_version\", \"test/cli/commands_test.py::test__cli__command_rules\", \"test/cli/commands_test.py::test__cli__command_dialects\", \"test/cli/commands_test.py::test__cli__command__fix[L001-test/fixtures/linter/indentation_errors.sql]\", \"test/cli/commands_test.py::test__cli__command__fix[L008-test/fixtures/linter/whitespace_errors.sql]\", \"test/cli/commands_test.py::test__cli__command__fix[L008-test/fixtures/linter/indentation_errors.sql]\", \"test/cli/commands_test.py::test__cli__command__fix[L003-test/fixtures/linter/indentation_error_hard.sql]\", \"test/cli/commands_test.py::test__cli__command_fix_stdin[select\", \"test/cli/commands_test.py::test__cli__command_fix_stdin[\", \"test/cli/commands_test.py::test__cli__command_fix_stdin[SELECT\", \"test/cli/commands_test.py::test__cli__command_fix_stdin_logging_to_stderr\", \"test/cli/commands_test.py::test__cli__command_fix_stdin_safety\", \"test/cli/commands_test.py::test__cli__command_fix_stdin_error_exit_code[create\", \"test/cli/commands_test.py::test__cli__command_fix_stdin_error_exit_code[select\", \"test/cli/commands_test.py::test__cli__command__fix_no_force[L001-test/fixtures/linter/indentation_errors.sql-y-0-0]\", \"test/cli/commands_test.py::test__cli__command__fix_no_force[L001-test/fixtures/linter/indentation_errors.sql-n-65-1]\", \"test/cli/commands_test.py::test__cli__command_parse_serialize_from_stdin[yaml]\", \"test/cli/commands_test.py::test__cli__command_parse_serialize_from_stdin[json]\", \"test/cli/commands_test.py::test__cli__command_lint_serialize_from_stdin[select\", \"test/cli/commands_test.py::test__cli__command_lint_serialize_from_stdin[SElect\", \"test/cli/commands_test.py::test__cli__command_fail_nice_not_found[command0]\", \"test/cli/commands_test.py::test__cli__command_fail_nice_not_found[command1]\", \"test/cli/commands_test.py::test__cli__command_lint_serialize_multiple_files[yaml]\", \"test/cli/commands_test.py::test__cli__command_lint_serialize_multiple_files[json]\", \"test/cli/commands_test.py::test__cli__command_lint_serialize_multiple_files[github-annotation]\", \"test/cli/commands_test.py::test__cli__command_lint_serialize_github_annotation\", \"test/cli/commands_test.py::test___main___help\", \"test/cli/commands_test.py::test_encoding[utf-8-ascii]\", \"test/cli/commands_test.py::test_encoding[utf-8-sig-UTF-8-SIG]\", \"test/cli/commands_test.py::test_encoding[utf-32-UTF-32]\"]", "environment_setup_commit": "67023b85c41d23d6c6d69812a41b207c4f8a9331"}